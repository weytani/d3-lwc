<?xml version="1.0" encoding="UTF-8" ?>
<LightningComponentBundle xmlns="http://soap.sforce.com/2006/04/metadata">
    <apiVersion>59.0</apiVersion>
    <isExposed>true</isExposed>
    <masterLabel>D3 Force Graph</masterLabel>
    <description
  >Network/graph visualization with force simulation. Displays nodes and edges with drag, zoom/pan, and click-to-navigate support.</description>
    <targets>
        <target>lightning__AppPage</target>
        <target>lightning__RecordPage</target>
        <target>lightning__HomePage</target>
        <target>lightningCommunity__Default</target>
    </targets>
    <targetConfigs>
        <targetConfig
      targets="lightning__AppPage,lightning__RecordPage,lightning__HomePage,lightningCommunity__Default"
    >
            <!-- Data Source -->
            <property
        name="soqlQuery"
        type="String"
        label="SOQL Query"
        description="Query to fetch relationship data (e.g., SELECT Id, AccountId, ContactId FROM AccountContactRelation)"
      />
            
            <!-- Field Mapping -->
            <property
        name="nodeIdField"
        type="String"
        label="Node ID Field"
        default="Id"
        description="Field containing the unique node identifier"
      />
            <property
        name="nodeLabelField"
        type="String"
        label="Node Label Field"
        default="Name"
        description="Field containing the node display label"
      />
            <property
        name="sourceField"
        type="String"
        label="Source Field"
        default="ParentId"
        description="Field containing the source node ID in relationships"
      />
            <property
        name="targetField"
        type="String"
        label="Target Field"
        default="Id"
        description="Field containing the target node ID in relationships"
      />
            <property
        name="nodeSizeField"
        type="String"
        label="Node Size Field"
        description="Optional numeric field for varying node sizes"
      />
            <property
        name="linkWeightField"
        type="String"
        label="Link Weight Field"
        description="Optional numeric field for varying link widths"
      />
            <property
        name="nodeTypeField"
        type="String"
        label="Node Type Field"
        description="Optional field for node coloring by category"
      />
            
            <!-- Navigation -->
            <property
        name="objectApiName"
        type="String"
        label="Object API Name"
        description="Object API name for navigation on node click (e.g., Contact)"
      />
            
            <!-- Dimensions -->
            <property
        name="height"
        type="Integer"
        label="Height (px)"
        default="400"
        description="Chart height in pixels"
      />
            
            <!-- Node Appearance -->
            <property
        name="nodeRadius"
        type="Integer"
        label="Node Radius"
        default="8"
        description="Base node radius when not using size field"
      />
            <property
        name="minNodeRadius"
        type="Integer"
        label="Min Node Radius"
        default="4"
        description="Minimum node radius when using size field"
      />
            <property
        name="maxNodeRadius"
        type="Integer"
        label="Max Node Radius"
        default="20"
        description="Maximum node radius when using size field"
      />
            <property
        name="showLabels"
        type="Boolean"
        label="Show Labels"
        default="true"
        description="Display node labels"
      />
            <property
        name="labelFontSize"
        type="Integer"
        label="Label Font Size"
        default="10"
      />
            
            <!-- Link Appearance -->
            <property
        name="linkWidth"
        type="Integer"
        label="Link Width"
        default="1"
        description="Base link width when not using weight field"
      />
            <property
        name="linkColor"
        type="String"
        label="Link Color"
        default="#999999"
      />
            
            <!-- Theme -->
            <property
        name="theme"
        type="String"
        label="Color Theme"
        default="Salesforce Standard"
        datasource="Salesforce Standard,Warm,Cool,Vibrant"
      />
            
            <!-- Interaction -->
            <property
        name="enableZoom"
        type="Boolean"
        label="Enable Zoom/Pan"
        default="true"
      />
            <property
        name="enableDrag"
        type="Boolean"
        label="Enable Drag"
        default="true"
      />
            
            <!-- Force Configuration -->
            <property
        name="chargeStrength"
        type="Integer"
        label="Charge Strength"
        default="-300"
        description="Repulsion strength (negative value). Lower = more spread out."
      />
            <property
        name="linkDistance"
        type="Integer"
        label="Link Distance"
        default="50"
        description="Preferred distance between connected nodes"
      />
            
            <!-- Advanced -->
            <property
        name="advancedConfig"
        type="String"
        label="Advanced Config (JSON)"
        description="JSON object for additional customization"
      />
        </targetConfig>
        
        <targetConfig targets="lightning__FlowScreen">
            <propertyType
        name="T"
        extends="SObject"
        label="Record Type"
        description="SObject type for the record collection"
      />
            <property
        name="recordCollection"
        type="{T[]}"
        label="Record Collection"
        role="inputOnly"
        description="Collection of relationship records"
      />
            <property
        name="sourceField"
        type="String"
        label="Source Field"
        default="ParentId"
      />
            <property
        name="targetField"
        type="String"
        label="Target Field"
        default="Id"
      />
            <property
        name="nodeLabelField"
        type="String"
        label="Node Label Field"
        default="Name"
      />
            <property
        name="nodeTypeField"
        type="String"
        label="Node Type Field"
      />
            <property
        name="height"
        type="Integer"
        label="Height (px)"
        default="400"
      />
            <property
        name="theme"
        type="String"
        label="Color Theme"
        default="Salesforce Standard"
      />
            <property
        name="showLabels"
        type="Boolean"
        label="Show Labels"
        default="true"
      />
            <property
        name="enableZoom"
        type="Boolean"
        label="Enable Zoom/Pan"
        default="true"
      />
            <property
        name="enableDrag"
        type="Boolean"
        label="Enable Drag"
        default="true"
      />
        </targetConfig>
    </targetConfigs>
</LightningComponentBundle>
