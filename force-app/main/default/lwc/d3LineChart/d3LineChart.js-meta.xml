<?xml version="1.0" encoding="UTF-8"?>
<LightningComponentBundle xmlns="http://soap.sforce.com/2006/04/metadata">
    <apiVersion>59.0</apiVersion>
    <isExposed>true</isExposed>
    <masterLabel>D3 Line Chart</masterLabel>
    <description>Interactive time series line chart powered by D3.js with multi-series and drill-down support.</description>
    <targets>
        <target>lightning__AppPage</target>
        <target>lightning__RecordPage</target>
        <target>lightning__HomePage</target>
        <target>lightning__FlowScreen</target>
        <target>lightningCommunity__Page</target>
        <target>lightningCommunity__Default</target>
    </targets>
    <targetConfigs>
        <targetConfig targets="lightning__AppPage,lightning__RecordPage,lightning__HomePage,lightningCommunity__Page,lightningCommunity__Default">
            <!-- Data Source -->
            <property name="soqlQuery" type="String" label="SOQL Query" 
                description="SOQL query to fetch time series data"
                placeholder="SELECT CloseDate, Amount, StageName FROM Opportunity ORDER BY CloseDate"/>
            
            <!-- Field Mapping -->
            <property name="dateField" type="String" label="Date Field" required="true"
                description="API name of the date/datetime field for X-axis"
                placeholder="CloseDate"/>
            <property name="valueField" type="String" label="Value Field" required="true"
                description="API name of the numeric field for Y-axis"
                placeholder="Amount"/>
            <property name="seriesField" type="String" label="Series Field"
                description="Optional field to split into multiple lines (e.g., StageName)"
                placeholder="StageName"/>
            
            <!-- Date Parsing -->
            <property name="dateFormat" type="String" label="Date Format" default="ISO"
                datasource="ISO,US,EU"
                description="Date format for parsing: ISO (YYYY-MM-DD), US (MM/DD/YYYY), EU (DD/MM/YYYY)"/>
            
            <!-- Appearance -->
            <property name="height" type="Integer" label="Height (px)" default="300"
                description="Chart height in pixels" min="150" max="800"/>
            <property name="theme" type="String" label="Color Theme" default="Salesforce Standard"
                datasource="Salesforce Standard,Warm,Cool,Vibrant"
                description="Color palette for the chart"/>
            <property name="curveType" type="String" label="Line Style" default="monotone"
                datasource="linear,monotone,step"
                description="Line interpolation style"/>
            <property name="showPoints" type="Boolean" label="Show Data Points" default="true"
                description="Display points on the line for hover interactions"/>
            <property name="showLegend" type="Boolean" label="Show Legend"
                description="Display legend (auto-shown for multi-series)"/>
            
            <!-- Drill-Down -->
            <property name="objectApiName" type="String" label="Drill-Down Object"
                description="Object API name for navigation on point click"
                placeholder="Opportunity"/>
            <property name="filterField" type="String" label="Filter Field"
                description="Field to filter by on drill-down (defaults to Date Field)"/>
            
            <!-- Advanced -->
            <property name="advancedConfig" type="String" label="Advanced Config (JSON)"
                description='{"showGrid": true, "customColors": ["#1589EE", "#FF5D2D"]}'/>
        </targetConfig>
        
        <!-- Flow Screen Configuration -->
        <targetConfig targets="lightning__FlowScreen">
            <property name="recordCollection" type="@salesforce/schema/SObject[]" label="Record Collection"
                description="Collection of records from Flow"/>
            <property name="dateField" type="String" label="Date Field" required="true"
                description="API name of the date field"/>
            <property name="valueField" type="String" label="Value Field" required="true"
                description="API name of the numeric field"/>
            <property name="seriesField" type="String" label="Series Field"
                description="Optional field for multi-series"/>
            <property name="dateFormat" type="String" label="Date Format" default="ISO"/>
            <property name="height" type="Integer" label="Height (px)" default="300"/>
            <property name="theme" type="String" label="Color Theme" default="Salesforce Standard"/>
            <property name="curveType" type="String" label="Line Style" default="monotone"/>
            <property name="showPoints" type="Boolean" label="Show Data Points" default="true"/>
            <property name="showLegend" type="Boolean" label="Show Legend"/>
        </targetConfig>
    </targetConfigs>
</LightningComponentBundle>
