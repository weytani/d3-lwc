<?xml version="1.0" encoding="UTF-8"?>
<LightningComponentBundle xmlns="http://soap.sforce.com/2006/04/metadata">
    <apiVersion>59.0</apiVersion>
    <isExposed>true</isExposed>
    <masterLabel>D3 Gauge Chart</masterLabel>
    <description>A gauge chart for displaying single KPI values using D3.js</description>
    <targets>
        <target>lightning__AppPage</target>
        <target>lightning__RecordPage</target>
        <target>lightning__HomePage</target>
        <target>lightningCommunity__Page</target>
        <target>lightningCommunity__Default</target>
        <target>lightning__FlowScreen</target>
    </targets>
    <targetConfigs>
        <targetConfig targets="lightning__AppPage,lightning__RecordPage,lightning__HomePage,lightningCommunity__Page,lightningCommunity__Default">
            <!-- Data Source -->
            <property name="soqlQuery" type="String" label="SOQL Query" 
                description="Query to fetch data. Use aggregate query for single value (e.g., SELECT COUNT(Id) total FROM Lead)"/>
            
            <!-- Field Configuration -->
            <property name="valueField" type="String" label="Value Field" required="true" 
                description="API name of the numeric field to display"/>
            
            <!-- Display Configuration -->
            <property name="height" type="Integer" label="Height (px)" default="200"
                description="Chart height in pixels"/>
            <property name="minValue" type="Integer" label="Minimum Value" default="0"
                description="Minimum gauge value"/>
            <property name="maxValue" type="Integer" label="Maximum Value" default="100"
                description="Maximum gauge value"/>
            <property name="theme" type="String" label="Color Theme" default="Salesforce Standard"
                datasource="Salesforce Standard,Warm,Cool,Vibrant,Custom"
                description="Color theme for the gauge"/>
            
            <!-- Advanced Configuration -->
            <property name="advancedConfig" type="String" label="Advanced Config (JSON)"
                description="JSON configuration: {label, valueFormat, zones, customColors}"/>
            
            <!-- Navigation -->
            <property name="targetRecordId" type="String" label="Target Record ID"
                description="Record ID to navigate to on click"/>
        </targetConfig>
        
        <targetConfig targets="lightning__FlowScreen">
            <!-- Flow Data Source -->
            <property name="recordCollection" type="@salesforce/schema/SObject[]" label="Record Collection" 
                role="inputOnly" description="Collection of records from Flow"/>
            
            <!-- Field Configuration -->
            <property name="valueField" type="String" label="Value Field" required="true"/>
            
            <!-- Display Configuration -->
            <property name="height" type="Integer" label="Height (px)" default="200"/>
            <property name="minValue" type="Integer" label="Minimum Value" default="0"/>
            <property name="maxValue" type="Integer" label="Maximum Value" default="100"/>
            <property name="theme" type="String" label="Color Theme" default="Salesforce Standard"/>
            
            <!-- Advanced -->
            <property name="advancedConfig" type="String" label="Advanced Config (JSON)"/>
        </targetConfig>
    </targetConfigs>
</LightningComponentBundle>
